<div class="col-sm-12 hidden" id="form_name"><%= "game" %></div>
<br>
<%= form_with(model: @game, local: true) do |form| %>

  <% if @game.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(game.errors.count, "error") %> prohibited this game from being saved:</h2>
      <ul>
      <% @game.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

	<% ryteams = @games.map {|g| g.ryteam}.uniq %>
	<% gbteams = @games.map {|g| g.gbteam}.uniq %>
	<% @teams = ryteams.concat(gbteams).uniq.sort! %>

<body class="container">
	
	<div class="row border border-primary">
	  <div class="col-sm-2"></div>
	  <div class="col-sm-2"><%= form.label "Game:" %><%= form.text_field :name %></div> 
	  <div class="col-sm-2"><%= form.label :status %><%= form.text_field :status %></div>
	  <div class="col-sm-2"><%= form.label :turn %><%= form.number_field :turn%></div>
	  <div class="col-sm-2"><%= form.label :winner%><%= form.text_field :winner %> </div>
	  <div class="col-sm-2"></div>
	</div>

	<br>

	<div class="row border text-left">
		<span class="col-sm-2"></span>
		<div class="col-sm-2", style="color:yellow; text-align:left"><%= form.label "Yellow"%></div>
		<div class="col-sm-2", style="color:red; text-align:left"><%= form.label "Red"%></div>
		<div class="col-sm-2", style="color:green; text-align:left"><%= form.label "Green"%></div>
		<div class="col-sm-2", style="color:blue; text-align:left"><%= form.label "Blue"%></div>
	    <span class="col-sm-2"></span>
	</div>

	<div class="row">
		<div class="col-sm-2"><%= form.label "Players"%></div>
		<div class="col-sm-2"><%= form.text_field :yplayer %></div>
		<div class="col-sm-2"><%= form.text_field :rplayer %></div>
		<div class="col-sm-2"><%= form.text_field :gplayer %></div>
		<div class="col-sm-2"><%= form.text_field :bplayer %></div>
	    <span class="col-sm-2"></span>
	</div>

	<div class="row">
		<div class="col-sm-2"><%= form.label "Team names"%></div>
		<div id="ryteam">		
			<span class="col-sm-3"><%= form.text_field :ryteam, :style => "width:260px"%></span>
			<span id="ryselect" class="col-sm-1"><%=form.select :selected_ryteam, @teams, {}, :style => "width:20px"%></span>
		</div>
		<div id="gbteam">
			<span class="col-sm-3"><%= form.text_field :gbteam, :style => "width:260px"%></span>
			<span id="gbselect" class="col-sm-1"><%=form.select :selected_gbteam, @teams, {}, :style => "width:20px"%></span>
		</div>
	    <div class="col-sm-2"></div>
	</div>
	<br>
	
	<div class="row">
		<div class="col-sm-2 top"><%= form.label "Auto Refresh"%> </div>
		<div class="col-sm-1 top"><%= form.select :refresh, [["On", 1],["Off", 0]] %></div>
		<div class="col-sm-9"></div>
	</div>
	
	<div class="hidden">

		<div class="row">
			<span class="col-sm-2 top"><%= form.label "Hand"%></span>
			<span class="col-sm-2 top"><%= form.text_field :yellowhand %></span>
			<span class="col-sm-2 top"><%= form.text_field :redhand %></span>
			<span class="col-sm-2 top"><%= form.text_field :greenhand %></span>
			<span class="col-sm-2 top"><%= form.text_field :bluehand %></span>
		    <span class="col-sm-2"></span>
		</div>

		<div class="row">
			<div class="col-sm-2 top"><%= form.label "Deck"%></div>
			<div class="col-sm-8 top"><%= form.text_area :deck, cols: "104", rows: "2"%></div>
		    <span class="col-sm-2"></span>
		</div>

		<div class="row">
			<div class="col-sm-2 top"><%= form.label "Board"%></div>
			<div class="col-sm-8 top"><%= form.text_area :board, cols: "104", rows: "2"%></div>
		    <span class="col-sm-2"></span>
		</div>

		<div class="row">
			<div class="col-sm-2 top"><%= form.label "Discard Pile"%></div>
			<div class="col-sm-8 top"><%= form.text_area :discardpile, cols: "104", rows: "2"%></div>
		    <span class="col-sm-2"></span>
		</div>
	
		<div class="row">
			<div class="col-sm-2 top"><%= form.label "Messages"%></div>
			<div class="col-sm-8 top"><%= form.text_area :comment, cols: "104", rows: "5"%></div>
			<span class="col-sm-2"></span>
		</div>
	
		<div class="row">
			<div class="col-sm-2 top"><%= form.label "Screen Coordinates"%> </div>
			<div class="col-sm-10 top"><%= form.text_area :screen, cols: "104", rows: "1"%></div>
		</div>
	
		<div class="row">
			<div class="col-sm-2 top"><%= form.label "Marbles Moved"%> </div>
			<div class="col-sm-10 top"><%= form.text_area :moved, cols: "104", rows: "1"%></div>
		</div>
		
	</div>
	
	<br><br>
	
    <div class="row" >
      <div class="col-sm-2"><%= form.submit "Save", class:"btn btn-danger", id:"Save"%></div>
      <div class="col-sm-10"><%= link_to 'Back', games_path%></div>
    </div>

<script>
  $("#ryselect").on("change", function(){
	  selected_team = $("#game_selected_ryteam").val();
	  $("#game_ryteam").val(selected_team);
	  $("#game_selected_ryteam").val("");
  });
  $("#gbselect").on("change", function(){
	  selected_team = $("#game_selected_gbteam").val();
	  $("#game_gbteam").val(selected_team);
	  $("#game_selected_gbteam").val("");
  });
</script>	

</body>
<% end %>


